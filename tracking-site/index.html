<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track & Trace - RVS Logistics</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background: #ffffff; color: #333; }

        .header { background: #0d234b; padding: 12px 24px; position: relative; }
        .header-content { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; }
        .nav-left, .nav-right { display: flex; gap: 32px; flex: 1; }
        .nav-left { justify-content: flex-start; }
        .nav-right { justify-content: flex-end; }
        .nav-left a, .nav-right a { color: #ffffff; text-decoration: none; font-weight: 500; font-size: 15px; transition: color 0.2s; }
        .nav-left a:hover, .nav-right a:hover { color: #29ABE2; }
        .logo { display: flex; align-items: center; justify-content: center; padding: 0 40px; }
        .logo img { height: 65px; width: auto; }
        .mobile-menu-btn { display: none; background: none; border: none; cursor: pointer; padding: 8px; }
        .mobile-menu-btn svg { width: 28px; height: 28px; fill: white; }
        .mobile-nav { display: none; position: absolute; top: 100%; left: 0; right: 0; background: #0d234b; flex-direction: column; padding: 20px; gap: 16px; border-top: 1px solid rgba(255,255,255,0.1); z-index: 100; }
        .mobile-nav.show { display: flex; }
        .mobile-nav a { color: #ffffff; text-decoration: none; font-weight: 500; font-size: 15px; padding: 8px 0; }

        .hero { background: linear-gradient(135deg, #29ABE2 0%, #0d234b 100%); color: white; padding: 80px 24px; text-align: center; position: relative; overflow: hidden; }
        .hero::before { content: ''; position: absolute; top: 0; right: 0; width: 50%; height: 100%; background: #0d234b; border-radius: 0 0 0 50%; opacity: 0.3; }
        .hero-content { position: relative; z-index: 1; max-width: 800px; margin: 0 auto; }
        .hero h1 { font-size: 48px; font-weight: 700; margin-bottom: 30px; }

        .search-container { display: flex; justify-content: center; gap: 12px; max-width: 600px; margin: 0 auto; }
        .search-input { flex: 1; padding: 18px 24px; border: none; border-radius: 8px; font-size: 16px; outline: none; }
        .search-input::placeholder { color: #999; }
        .search-btn { padding: 18px 32px; background: #0d234b; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: background 0.3s; }
        .search-btn:hover { background: #1a3a6e; }
        .search-btn svg { width: 18px; height: 18px; fill: currentColor; }

        .features-section { padding: 80px 24px; background: #ffffff; }
        .features-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 32px; max-width: 1200px; margin: 0 auto; }
        .feature-card { background: #f0f8fc; border-radius: 12px; overflow: hidden; }
        .feature-image { width: 100%; height: 220px; object-fit: cover; }
        .feature-image.rvs-image { object-fit: cover; object-position: center top; }
        .feature-content { padding: 24px; }
        .feature-label { font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .feature-title { font-size: 22px; font-weight: 700; color: #0d234b; margin-bottom: 12px; }
        .feature-description { font-size: 15px; color: #555; line-height: 1.6; }

        .sustainability-section { padding: 60px 0; background: #ffffff; }
        .sustainability-header { text-align: center; margin-bottom: 40px; }
        .sustainability-header h2 { font-size: 42px; font-weight: 700; color: #0d234b; }
        .sustainability-wrapper { background: #e8f5e9; border-radius: 24px; max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; overflow: hidden; min-height: 500px; }
        .sustainability-image-container { position: relative; }
        .sustainability-image { width: 100%; height: 100%; object-fit: cover; border-radius: 24px; position: absolute; top: 0; left: 0; }
        .sustainability-content { padding: 60px 60px 60px 40px; display: flex; flex-direction: column; justify-content: center; }
        .sustainability-label { font-size: 11px; color: #333; text-transform: uppercase; letter-spacing: 2px; font-weight: 600; margin-bottom: 20px; }
        .sustainability-title { font-size: 44px; font-weight: 700; color: #0d234b; margin-bottom: 28px; line-height: 1.1; }
        .sustainability-text { font-size: 16px; color: #333; line-height: 1.7; margin-bottom: 20px; }

        .results { display: none; padding: 60px 24px; }
        .results.show { display: block; }
        .results-card { max-width: 900px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); padding: 40px; }
        .back-link { display: inline-flex; align-items: center; gap: 8px; color: #29ABE2; text-decoration: none; font-weight: 500; margin-bottom: 24px; font-size: 15px; }
        .back-link:hover { text-decoration: underline; }
        .tracking-header { border-bottom: 2px solid #f0f0f0; padding-bottom: 24px; margin-bottom: 32px; }
        .tracking-number-display { display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 16px; }
        .tracking-number { font-size: 28px; font-weight: 700; color: #0d234b; font-family: 'Courier New', monospace; }
        .status-pill { padding: 10px 24px; border-radius: 25px; font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        .status-pill.delivered { background: #d4edda; color: #155724; }
        .status-pill.in_transit { background: #cce5ff; color: #004085; }
        .status-pill.label_created { background: #fff3cd; color: #856404; }
        .status-pill.out_for_delivery { background: #e8f0fe; color: #5b6eae; }

        .barcode-section { text-align: center; }
        .barcode-container { display: inline-block; background: white; padding: 0 15px 8px; }
        #barcodeCanvas { display: block; height: 45px; }
        .barcode-text { font-family: 'Courier New', monospace; font-size: 11px; font-weight: 600; color: #000; margin-top: 5px; letter-spacing: 1px; }
        .barcode-label { font-size: 10px; color: #666; margin-top: 4px; }

        .actions-row { display: flex; justify-content: space-between; align-items: flex-start; gap: 24px; margin-top: 32px; flex-wrap: wrap; }
        .actions { display: flex; gap: 12px; }

        .progress-section { margin: 40px 0; }
        .progress-title { font-size: 14px; color: #666; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 0.5px; }
        .progress-track { display: flex; align-items: flex-start; justify-content: space-between; position: relative; padding: 0 10px; }
        .progress-track::before { content: ''; position: absolute; top: 24px; left: 34px; right: 34px; height: 3px; background: #e0e0e0; z-index: 0; }
        .progress-fill { position: absolute; top: 24px; left: 34px; height: 3px; background: #28a745; z-index: 1; transition: width 1s ease; }
        .progress-step { display: flex; flex-direction: column; align-items: center; position: relative; z-index: 2; flex: 0 0 auto; }
        .progress-dot { width: 48px; height: 48px; min-width: 48px; min-height: 48px; border-radius: 50%; background: white; border: 3px solid #e0e0e0; display: flex; align-items: center; justify-content: center; margin-bottom: 12px; transition: all 0.3s; box-sizing: border-box; }
        .progress-dot svg { width: 22px; height: 22px; fill: #999; flex-shrink: 0; }
        .progress-dot.active { border-color: #29ABE2; background: #29ABE2; }
        .progress-dot.active svg { fill: white; }
        .progress-dot.completed { border-color: #28a745; background: #28a745; }
        .progress-dot.completed svg { fill: white; }
        .progress-label { font-size: 13px; color: #666; text-align: center; max-width: 90px; }

        .info-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin: 40px 0; }
        .info-item { padding: 24px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #29ABE2; }
        .info-label { font-size: 13px; color: #666; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px; }
        .info-value { font-size: 18px; color: #0d234b; font-weight: 600; }

        .timeline-section { margin-top: 40px; }
        .timeline-title { font-size: 22px; color: #0d234b; margin-bottom: 24px; font-weight: 600; }
        .timeline { position: relative; padding-left: 50px; }
        .timeline::before { content: ''; position: absolute; left: 13px; top: 0; bottom: 0; width: 2px; background: #e0e0e0; }
        .timeline-item { position: relative; padding-bottom: 32px; }
        .timeline-item:last-child { padding-bottom: 0; }
        .timeline-dot { position: absolute; left: -50px; top: 8px; width: 28px; height: 28px; border-radius: 50%; background: #e8f4f8; border: 2px solid #29ABE2; display: flex; align-items: center; justify-content: center; }
        .timeline-dot svg { width: 14px; height: 14px; fill: #29ABE2; }
        .timeline-content { background: #f8f9fa; padding: 16px 20px; border-radius: 8px; }
        .timeline-status { font-size: 16px; font-weight: 600; color: #0d234b; margin-bottom: 4px; }
        .timeline-location { font-size: 14px; color: #666; margin-bottom: 4px; }
        .timeline-time { font-size: 13px; color: #999; }

        .btn { padding: 14px 28px; border: 2px solid #0d234b; background: white; color: #0d234b; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 8px; }
        .btn svg { width: 16px; height: 16px; fill: currentColor; }
        .btn:hover { background: #0d234b; color: white; }
        .btn.primary { background: #29ABE2; border-color: #29ABE2; color: white; }
        .btn.primary:hover { background: #1a8bc2; border-color: #1a8bc2; }

        .error { background: #f8d7da; border-left: 4px solid #dc3545; color: #721c24; padding: 16px 20px; border-radius: 8px; margin-top: 20px; }

        .footer { background: #0d234b; color: white; padding: 60px 24px 30px; margin-top: 80px; }
        .footer-content { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(3, 1fr); gap: 60px; }
        .footer h4 { font-size: 18px; margin-bottom: 20px; color: #29ABE2; }
        .footer p { color: rgba(255,255,255,0.8); font-size: 15px; line-height: 1.8; }
        .footer a { color: rgba(255,255,255,0.8); text-decoration: none; font-size: 15px; display: block; margin-bottom: 12px; transition: color 0.2s; }
        .footer a:hover { color: #29ABE2; }
        .footer-bottom { max-width: 1200px; margin: 40px auto 0; padding-top: 24px; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; font-size: 14px; color: rgba(255,255,255,0.6); }

        @media (max-width: 768px) {
            .mobile-menu-btn { display: block; }
            .nav-left, .nav-right { display: none; }
            .header-content { justify-content: space-between; }
            .logo { padding: 0; flex: 1; justify-content: flex-start; }
            .hero { padding: 50px 20px; }
            .hero h1 { font-size: 32px; }
            .search-container { flex-direction: column; }
            .search-btn { width: 100%; justify-content: center; }
            .features-section { padding: 40px 20px; }
            .features-grid { grid-template-columns: 1fr; gap: 24px; }
            .sustainability-wrapper { grid-template-columns: 1fr; margin: 0 20px; }
            .sustainability-image-container { height: 280px; }
            .sustainability-image { position: relative; border-radius: 24px 24px 0 0; }
            .sustainability-content { padding: 30px; }
            .sustainability-title { font-size: 28px; }
            .sustainability-header h2 { font-size: 28px; }
            .results { padding: 0; }
            .results-card { border-radius: 0; box-shadow: none; padding: 30px 20px; }
            .tracking-number { font-size: 18px; }
            .info-grid { grid-template-columns: 1fr; gap: 16px; }
            .actions-row { flex-direction: column; }
            .actions { width: 100%; flex-direction: column; }
            .btn { width: 100%; justify-content: center; }
            .barcode-section { width: 100%; margin-top: 20px; }
            .progress-track { overflow-x: auto; padding-bottom: 16px; }
            .footer { margin-top: 40px; padding: 40px 20px 24px; }
            .footer-content { grid-template-columns: 1fr; gap: 32px; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <nav class="nav-left">
                <a href="index.html">Track & Trace</a>
                <a href="faq.html">FAQ</a>
            </nav>
            <a href="index.html" class="logo">
                <img src="R.png" alt="RVS Logistics">
            </a>
            <nav class="nav-right">
                <a href="about.html">About Us</a>
                <a href="contact.html">Contact</a>
            </nav>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <svg viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
            </button>
        </div>
        <nav class="mobile-nav" id="mobileNav">
            <a href="index.html">Track & Trace</a>
            <a href="faq.html">FAQ</a>
            <a href="about.html">About Us</a>
            <a href="contact.html">Contact</a>
        </nav>
    </header>

    <section class="hero" id="heroSection">
        <div class="hero-content">
            <h1>Track Your Shipment</h1>
            <form class="search-container" id="searchForm">
                <input type="text" class="search-input" id="trackingInput" placeholder="Enter tracking number" required>
                <button type="submit" class="search-btn" id="searchBtn">Track <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></button>
            </form>
            <div id="errorMessage"></div>
        </div>
    </section>

    <section class="features-section" id="featuresSection">
        <div class="features-grid">
            <div class="feature-card">
                <img src="woman-with-parcel.webp" alt="Parcel Labeling" class="feature-image">
                <div class="feature-content">
                    <div class="feature-label">Fast Shipping</div>
                    <h3 class="feature-title">Quick & Reliable Delivery</h3>
                    <p class="feature-description">We ensure your packages are delivered on time, every time. Our extensive network covers destinations worldwide with speed and precision.</p>
                </div>
            </div>
            <div class="feature-card">
                <img src="omdeling-af-pakke---modtagerflex.webp" alt="Flexible Delivery" class="feature-image">
                <div class="feature-content">
                    <div class="feature-label">Flexible Options</div>
                    <h3 class="feature-title">Delivery On Your Terms</h3>
                    <p class="feature-description">Choose when and where to receive your package. We offer multiple delivery options to fit your schedule and lifestyle.</p>
                </div>
            </div>
            <div class="feature-card">
                <img src="rvs-delivery.jpg" alt="RVS Logistics Delivery" class="feature-image rvs-image">
                <div class="feature-content">
                    <div class="feature-label">Stay Updated</div>
                    <h3 class="feature-title">Real-Time Tracking</h3>
                    <p class="feature-description">Follow your shipment every step of the way. Get instant notifications and detailed tracking information directly to your device.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="sustainability-section" id="sustainabilitySection">
        <div class="sustainability-header"><h2>Sustainability</h2></div>
        <div class="sustainability-wrapper">
            <div class="sustainability-image-container">
                <img src="sustainability.png" alt="Green forest from above" class="sustainability-image">
            </div>
            <div class="sustainability-content">
                <div class="sustainability-label">Sustainability</div>
                <h3 class="sustainability-title">Committed to a Greener Future</h3>
                <p class="sustainability-text">At RVS Logistics, we believe that efficient delivery shouldn't come at the cost of our planet. Our goal is to achieve carbon-neutral shipping by 2030, and we're already making significant progress.</p>
                <p class="sustainability-text">Every parcel we track represents an opportunity to make smarter choices. We work exclusively with carriers who prioritize electric vehicles, bike couriers in urban areas, and fuel-efficient delivery routes — helping reduce the environmental footprint of every shipment.</p>
            </div>
        </div>
    </section>

    <section class="results" id="results">
        <div class="results-card">
            <a href="#" class="back-link" onclick="resetSearch(); return false;">← Back to search</a>
            <div class="tracking-header">
                <div class="tracking-number-display">
                    <div class="tracking-number" id="displayTrackingNumber"></div>
                    <div class="status-pill" id="displayStatus"></div>
                </div>
            </div>
            <div class="progress-section">
                <div class="progress-title">Delivery Progress</div>
                <div class="progress-track">
                    <div class="progress-fill" id="progressFill"></div>
                    <div class="progress-step"><div class="progress-dot" id="dot1"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><div class="progress-label">Order Created</div></div>
                    <div class="progress-step"><div class="progress-dot" id="dot2"><svg viewBox="0 0 24 24"><path d="M18 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM19.5 9.5L21.46 12H17V9.5h2.5zM6 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z"/></svg></div><div class="progress-label">In Transit</div></div>
                    <div class="progress-step"><div class="progress-dot" id="dot3"><svg viewBox="0 0 24 24"><path d="M18 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM19.5 9.5L21.46 12H17V9.5h2.5zM6 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z"/></svg></div><div class="progress-label">Out for Delivery</div></div>
                    <div class="progress-step"><div class="progress-dot" id="dot4"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><div class="progress-label">Delivered</div></div>
                </div>
            </div>
            <div class="info-grid">
                <div class="info-item"><div class="info-label">Estimated Delivery</div><div class="info-value" id="displayDeliveryDate">-</div></div>
                <div class="info-item"><div class="info-label">Destination</div><div class="info-value" id="displayDestination">-</div></div>
                <div class="info-item"><div class="info-label">Recipient</div><div class="info-value" id="displayRecipient">-</div></div>
            </div>
            <div class="actions-row">
                <div class="actions">
                    <button class="btn primary" onclick="copyTrackingNumber()" id="copyBtn"><svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>Copy Tracking Number</button>
                    <button class="btn" onclick="window.print()"><svg viewBox="0 0 24 24"><path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"/></svg>Print</button>
                </div>
                <div class="barcode-section"><div class="barcode-container"><canvas id="barcodeCanvas"></canvas><div class="barcode-text" id="barcodeText"></div><div class="barcode-label">Use this barcode for pickup</div></div></div>
            </div>
            <div class="timeline-section"><h3 class="timeline-title">Shipment History</h3><div class="timeline" id="timelineContainer"></div></div>
        </div>
    </section>

    <footer class="footer">
        <div class="footer-content">
            <div><h4>RVS Logistics</h4><p>Professional parcel tracking solutions for businesses and individuals. Real-time updates, reliable service, delivered with excellence.</p></div>
            <div><h4>Quick Links</h4><a href="index.html">Track & Trace</a><a href="about.html">About Us</a><a href="faq.html">FAQ</a><a href="contact.html">Contact Us</a></div>
            <div><h4>Contact</h4><p id="footerEmail"></p><p>Mon-Fri: 8:00-17:00</p></div>
        </div>
        <div class="footer-bottom">© 2026 RVS Logistics. All rights reserved.</div>
    </footer>

    <script>
        var user = 'support'; var domain = 'rvslogistics.com';
        document.getElementById('footerEmail').textContent = user + '@' + domain;

        const API_URL = 'https://trackisto-backend.onrender.com';
        let currentTrackingNumber = '';

        window.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const trackingParam = params.get('tracking');
            if (trackingParam) { document.getElementById('trackingInput').value = trackingParam; searchTracking(trackingParam); }
        });

        document.getElementById('searchForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const trackingNumber = document.getElementById('trackingInput').value.trim();
            if (!trackingNumber) return;
            searchTracking(trackingNumber);
        });

        async function searchTracking(trackingNumber) {
            const searchBtn = document.getElementById('searchBtn');
            const errorMessage = document.getElementById('errorMessage');
            searchBtn.disabled = true; searchBtn.textContent = 'Tracking...'; errorMessage.innerHTML = '';
            try {
                const response = await fetch(API_URL + '/api/tracking/' + trackingNumber);
                const data = await response.json();
                if (!response.ok) throw new Error(data.message || 'Tracking number not found');
                currentTrackingNumber = trackingNumber;
                window.history.pushState({tracking: trackingNumber}, '', '?tracking=' + trackingNumber);
                displayResults(data);
            } catch (error) { errorMessage.innerHTML = '<div class="error">' + error.message + '</div>'; }
            finally { searchBtn.disabled = false; searchBtn.innerHTML = 'Track <svg viewBox="0 0 24 24" style="width:18px;height:18px;fill:currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>'; }
        }

        function formatTime(timeString) {
            if (!timeString) return '';
            let formatted = timeString;
            if (formatted.includes('.')) {
                formatted = formatted.split('.')[0];
            }
            if (formatted.length > 5) {
                formatted = formatted.substring(0, 5);
            }
            return formatted;
        }

        function displayResults(data) {
            document.getElementById('heroSection').style.display = 'none';
            document.getElementById('featuresSection').style.display = 'none';
            document.getElementById('sustainabilitySection').style.display = 'none';
            document.getElementById('results').classList.add('show');
            document.getElementById('displayTrackingNumber').textContent = data.trackingNumber;
            generateBarcode(data.trackingNumber);
            document.getElementById('barcodeText').textContent = data.trackingNumber;
            const statusPill = document.getElementById('displayStatus');
            statusPill.textContent = data.status.replace('_', ' ');
            statusPill.className = 'status-pill ' + data.status;
            updateProgress(data.status);
            const deliveryDate = new Date(data.delivery.estimatedDate);
            document.getElementById('displayDeliveryDate').textContent = deliveryDate.toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' });
            document.getElementById('displayDestination').textContent = (data.customer.address || '') + ', ' + data.customer.zipCode + ' ' + data.customer.city + ', ' + data.customer.country;
            document.getElementById('displayRecipient').textContent = data.customer.name;
            const timelineContainer = document.getElementById('timelineContainer');
            timelineContainer.innerHTML = '';
            data.timeline.forEach((event) => {
                const eventDate = new Date(event.date);
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                const icon = getTimelineIcon(event.status);
                const formattedTime = formatTime(event.time);
                timelineItem.innerHTML = '<div class="timeline-dot">' + icon + '</div><div class="timeline-content"><div class="timeline-status">' + event.status + '</div><div class="timeline-location">' + event.location + '</div><div class="timeline-time">' + eventDate.toLocaleDateString('en-GB') + ' at ' + formattedTime + '</div></div>';
                timelineContainer.appendChild(timelineItem);
            });
        }

        function getTimelineIcon(status) {
            const s = status.toLowerCase();
            if (s.includes('delivered') || s.includes('cleared')) return '<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>';
            if (s.includes('order received') || s.includes('order created')) return '<svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>';
            if (s.includes('label created') || s.includes('package received')) return '<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-7-2h2v-4h4v-2h-4V7h-2v4H8v2h4z"/></svg>';
            if (s.includes('transit') || s.includes('departed') || s.includes('out for delivery')) return '<svg viewBox="0 0 24 24"><path d="M18 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM19.5 9.5L21.46 12H17V9.5h2.5zM6 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z"/></svg>';
            if (s.includes('customs')) return '<svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>';
            if (s.includes('parcel point') || s.includes('pickup')) return '<svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>';
            return '<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/></svg>';
        }

        function generateBarcode(text) {
            const canvas = document.getElementById('barcodeCanvas');
            const ctx = canvas.getContext('2d');
            const barWidth = 1.2; const height = 40;
            let pattern = '11010010000';
            for (let i = 0; i < text.length; i++) { pattern += generateCharPattern(text.charCodeAt(i)); }
            pattern += '1100011101011';
            canvas.width = pattern.length * barWidth; canvas.height = height;
            ctx.fillStyle = 'white'; ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'black';
            for (let i = 0; i < pattern.length; i++) { if (pattern[i] === '1') ctx.fillRect(i * barWidth, 0, barWidth, height); }
        }

        function generateCharPattern(charCode) {
            const patterns = ['11011001100','11001101100','11001100110','10010011000','10010001100','10001001100','10011001000','10011000100','10001100100','11001001000','11001000100','11000100100','10110011100','10011011100','10011001110','10111001100','10011101100','10011100110','11001110010','11001011100','11001001110','11011100100','11001110100','11101101110','11101001100','11100101100','11100100110','11101100100','11100110100','11100110010','11011011000','11011000110','11000110110','10100011000','10001011000','10001000110','10110001000','10001101000','10001100010','11010001000'];
            return patterns[charCode % patterns.length];
        }

        function updateProgress(status) {
            const progressFill = document.getElementById('progressFill');
            const dots = [document.getElementById('dot1'),document.getElementById('dot2'),document.getElementById('dot3'),document.getElementById('dot4')];
            let progress = 0, completedDots = 0, activeDot = -1;
            
            if (status === 'label_created') { 
                progress = 8; 
                completedDots = 1;
                activeDot = -1;
            }
            else if (status === 'in_transit') { 
                progress = 40; 
                completedDots = 1;
                activeDot = 1;
            }
            else if (status === 'out_for_delivery') { 
                progress = 70; 
                completedDots = 2;
                activeDot = 2;
            }
            else if (status === 'delivered') { 
                progress = 100; 
                completedDots = 4;
                activeDot = -1;
            }
            
            setTimeout(() => { progressFill.style.width = progress + '%'; }, 100);
            
            dots.forEach((dot, index) => { 
                dot.classList.remove('active', 'completed'); 
                if (index < completedDots) {
                    dot.classList.add('completed');
                } else if (index === activeDot) {
                    dot.classList.add('active');
                }
            });
        }

        function copyTrackingNumber() {
            navigator.clipboard.writeText(currentTrackingNumber);
            const copyBtn = document.getElementById('copyBtn');
            copyBtn.innerHTML = '<svg viewBox="0 0 24 24" style="width:16px;height:16px;fill:currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg> Copied!';
            setTimeout(() => { copyBtn.innerHTML = '<svg viewBox="0 0 24 24" style="width:16px;height:16px;fill:currentColor"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg> Copy Tracking Number'; }, 2000);
        }

        function resetSearch() {
            document.getElementById('heroSection').style.display = 'block';
            document.getElementById('featuresSection').style.display = 'block';
            document.getElementById('sustainabilitySection').style.display = 'block';
            document.getElementById('results').classList.remove('show');
            document.getElementById('trackingInput').value = '';
            document.getElementById('errorMessage').innerHTML = '';
            currentTrackingNumber = '';
            window.history.replaceState({}, document.title, window.location.pathname);
        }

        function toggleMobileMenu() { document.getElementById('mobileNav').classList.toggle('show'); }
    </script>
</body>
</html>
